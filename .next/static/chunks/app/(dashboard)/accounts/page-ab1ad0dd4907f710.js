(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[147],{1308:(e,t,r)=>{Promise.resolve().then(r.bind(r,45208))},1524:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},20508:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21786:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},21873:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},26617:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},27816:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},45208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var o=r(95155),i=r(12115),n=r(39867),l=r(89715),s=r(91761),d=r(1524),a=r(27816),c=r(86651),m=r(24947),h=r(16485),g=r(21873),u=r(20508),p=r(26617),f=r(63581),y=r(45105);let x=(0,y.A)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var b=r(21190),v=r(65229),j=r(46046);let S=(0,y.A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var w=r(21786);let C=(0,y.A)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);var k=r(8525),z=r(85832);function A(){var e;let[t,r]=(0,i.useState)(""),[y,A]=(0,i.useState)("entries"),[_,I]=(0,i.useState)([]),[B,R]=(0,i.useState)([]),[W,T]=(0,i.useState)(!0),[D,N]=(0,i.useState)(!1),[E,M]=(0,i.useState)("all"),[F,L]=(0,i.useState)(""),[P,O]=(0,i.useState)(""),[q,V]=(0,i.useState)(new Map),[U,H]=(0,i.useState)(new Map),[Y,J]=(0,i.useState)(new Map),[Z,G]=(0,i.useState)(new Map),[K,Q]=(0,i.useState)(null),[X,$]=(0,i.useState)(!1),[ee,et]=(0,i.useState)([]),[er,eo]=(0,i.useState)(!1),[ei,en]=(0,i.useState)(""),[el,es]=(0,i.useState)(null),[ed,ea]=(0,i.useState)([]),[ec,em]=(0,i.useState)(!1),[eh,eg]=(0,i.useState)(!1),[eu,ep]=(0,i.useState)("accountant"),[ef,ey]=(0,i.useState)(!1),[ex,eb]=(0,i.useState)(""),[ev,ej]=(0,i.useState)(""),[eS,ew]=(0,i.useState)(""),[eC,ek]=(0,i.useState)(!1),ez=(0,k.U)();(0,i.useEffect)(()=>{eI(),eR(),eA(),"completed"===y&&eB()},[y,E,F,P]),(0,i.useEffect)(()=>{if(K&&(et([...K.products]),e_(),"completed"===K.status)){var e;eb((null==(e=K.discountAmount)?void 0:e.toString())||""),ej(K.discountOfferedBy||""),ew(K.discountReason||"")}},[K]);let eA=async()=>{try{let{data:{user:e}}=await ez.auth.getUser();if(e){let{data:t}=await ez.from("profiles").select("role").eq("id",e.id).single();t&&ep(t.role||"accountant")}}catch(e){console.error("Error loading user role:",e)}},e_=async()=>{if(K)try{let{data:e}=await ez.from("vehicle_inward_comments").select("*").eq("vehicle_inward_id",K.id).like("comment","INVOICE_REF:%").order("created_at",{ascending:!1});if(e&&e.length>0){let t=e.map(e=>e.id),{data:r}=await ez.from("vehicle_inward_comment_attachments").select("*").in("comment_id",t),o={};r&&r.forEach(e=>{o[e.comment_id]=e});let i=e.map(e=>{let t=e.comment.match(/INVOICE_REF:(link|file|image):(.+)/);if(t){let r=o[e.id];return{type:t[1],url:r?r.file_url:t[2],fileName:r?r.file_name:t[2],uploadedAt:e.created_at}}return null}).filter(Boolean);ea(i)}else ea([])}catch(e){console.error("Error loading invoice references:",e),ea([])}},eI=async()=>{try{let{data:e}=await ez.from("locations").select("id, name");e&&V(new Map(e.map(e=>[e.id,e.name])));let{data:t}=await ez.from("vehicle_types").select("id, name");t&&H(new Map(t.map(e=>[e.id,e.name])));let{data:r}=await ez.from("profiles").select("id, name").eq("role","manager");r&&J(new Map(r.map(e=>[e.id,e.name])));let{data:o}=await ez.from("departments").select("id, name");o&&G(new Map(o.map(e=>[e.id,e.name])))}catch(e){console.error("Error loading related data:",e)}},eB=async()=>{try{N(!0);let e=ez.from("vehicle_inward").select("*").in("status",["completed","complete_and_delivered","delivered","delivered_final","delivered (final)"]).order("updated_at",{ascending:!1}),t=null,r=new Date;switch(E){case"today":{let e=new Date(r);e.setHours(0,0,0,0),t=e;break}case"week":{let e=new Date(r);e.setDate(e.getDate()-7),t=e;break}case"month":{let e=new Date(r);e.setMonth(e.getMonth()-1),t=e;break}case"year":{let e=new Date(r);e.setFullYear(e.getFullYear()-1),t=e;break}case"custom":F&&(t=new Date(F))}if(t&&(e=e.gte("updated_at",t.toISOString())),"custom"===E&&P){let t=new Date(P);t.setHours(23,59,59,999),e=e.lte("updated_at",t.toISOString())}let{data:o,error:i}=await e;if(i)throw i;if(o&&o.length>0){let e=o.map(e=>{let t=[],r=0;if(e.accessories_requested)try{let o=JSON.parse(e.accessories_requested);Array.isArray(o)&&(t=o.map(e=>{let t=parseFloat(e.price||0);return r+=t,{product:e.product||"",brand:e.brand||"",price:t,department:e.department||""}}))}catch(e){}let o=0,i=0,n="",l="";if(e.notes)try{let t=JSON.parse(e.notes);t.discount&&(o=parseFloat(t.discount.discount_amount||0),i=t.discount.discount_percentage||(r>0?o/r*100:0),n=t.discount.discount_offered_by||"",l=t.discount.discount_reason||"")}catch(t){(o=parseFloat(e.discount_amount||0))>0&&r>0&&(i=o/r*100)}else(o=parseFloat(e.discount_amount||0))>0&&r>0&&(i=o/r*100),n=e.discount_offered_by||e.discount_offered_by_name||"",l=e.discount_reason||"";let s=r-o;return{id:e.id,shortId:e.short_id||e.id.substring(0,8),customerName:e.customer_name||"N/A",customerPhone:e.customer_phone||"N/A",customerEmail:e.customer_email,vehicleNumber:e.registration_number||"N/A",model:e.model||"N/A",make:e.make||"Unknown",year:e.year,color:e.color,vehicleType:e.vehicle_type,location:e.location_id,manager:e.assigned_manager_id,installationCompleteDate:e.updated_at||e.created_at,expectedDelivery:e.estimated_completion_date,products:t,totalAmount:r,status:e.status,created_at:e.created_at,completed_at:e.updated_at,discountAmount:o,discountPercentage:i,discountOfferedBy:n,discountReason:l,finalAmount:s}});R(e)}else R([])}catch(e){console.error("Error fetching completed entries:",e),R([])}finally{N(!1)}},eR=async()=>{try{T(!0);let{data:e,error:t}=await ez.from("vehicle_inward").select("*").eq("status","installation_complete").order("updated_at",{ascending:!1});if(t)throw t;if(e&&e.length>0){let t=e.map(e=>{let t=[],r=0;if(e.accessories_requested)try{let o=JSON.parse(e.accessories_requested);Array.isArray(o)&&(t=o.map(e=>{let t=parseFloat(e.price||0);return r+=t,{product:e.product||"",brand:e.brand||"",price:t,department:e.department||""}}))}catch(e){}return{id:e.id,shortId:e.short_id||e.id.substring(0,8),customerName:e.customer_name||"N/A",customerPhone:e.customer_phone||"N/A",customerEmail:e.customer_email,vehicleNumber:e.registration_number||"N/A",model:e.model||"N/A",make:e.make||"Unknown",year:e.year,color:e.color,vehicleType:e.vehicle_type,location:e.location_id,manager:e.assigned_manager_id,installationCompleteDate:e.updated_at||e.created_at,expectedDelivery:e.estimated_completion_date,products:t,totalAmount:r,status:e.status,created_at:e.created_at}});I(t)}else I([])}catch(e){console.error("Error fetching account entries:",e),I([])}finally{T(!1)}},eW=_.filter(e=>{var r;let o=t.toLowerCase();return e.customerName.toLowerCase().includes(o)||e.vehicleNumber.toLowerCase().includes(o)||e.model.toLowerCase().includes(o)||(null==(r=e.shortId)?void 0:r.toLowerCase().includes(o))}),eT=eW.length,eD=eW.reduce((e,t)=>e+t.totalAmount,0),eN=B.filter(e=>{var r;let o=t.toLowerCase();return e.customerName.toLowerCase().includes(o)||e.vehicleNumber.toLowerCase().includes(o)||e.model.toLowerCase().includes(o)||(null==(r=e.shortId)?void 0:r.toLowerCase().includes(o))}),eE=eN.length,eM=eN.reduce((e,t)=>e+(t.finalAmount||t.totalAmount),0),eF=eN.reduce((e,t)=>e+t.totalAmount,0),eL=eN.reduce((e,t)=>e+(t.discountAmount||0),0),eP=eE>0?eL/eE:0,eO=eF>0?eL/eF*100:0,eq=eE>0?eM/eE:0,eV=eN.filter(e=>(e.discountAmount||0)>0).length,eU=eE>0?eV/eE*100:0,eH="completed"===y?eE:eT,eY="completed"===y?eM:eD,eJ="completed"===y?eq:eT>0?eD/eT:0,eZ=e=>e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",eG=e=>"₹".concat(e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})),eK=e=>["Entry ID,Customer Name,Phone,Email,Vehicle Number,Model,Make,Location,Manager,Completed Date,Original Amount,Discount Amount,Discount %,Discount Offered By,Discount Reason,Final Amount,Product Count",...e.map(e=>[e.shortId||e.id.substring(0,8),e.customerName,e.customerPhone,e.customerEmail||"",e.vehicleNumber,e.model,e.make,e.location?q.get(e.location)||e.location:"",e.manager?Y.get(e.manager)||e.manager:"",e.completed_at?eZ(e.completed_at):"",e.totalAmount.toString(),(e.discountAmount||0).toString(),(e.discountPercentage||0).toFixed(2),e.discountOfferedBy||"",e.discountReason||"",(e.finalAmount||e.totalAmount).toString(),e.products.length.toString()]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),eQ=(e,t)=>{let r=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),i=URL.createObjectURL(r);o.setAttribute("href",i),o.setAttribute("download",t),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},eX=(e,t,r)=>{let o=[...ee];o[e]={...o[e],[t]:r},et(o)},e$=async()=>{if(K)try{eo(!0);let e=JSON.stringify(ee),{error:t}=await ez.from("vehicle_inward").update({accessories_requested:e}).eq("id",K.id);if(t)throw t;let r=ee.reduce((e,t)=>e+t.price,0),o={...K,products:ee,totalAmount:r};Q(o),I(_.map(e=>e.id===K.id?o:e)),$(!1),alert("Product details updated successfully!"),await eR()}catch(e){console.error("Error saving products:",e),alert("Failed to save products: ".concat(e.message))}finally{eo(!1)}},e0=async()=>{if(ei.trim()&&K)try{em(!0);let{data:{user:e}}=await ez.auth.getUser(),{error:t}=await ez.from("vehicle_inward_comments").insert({vehicle_inward_id:K.id,comment:"INVOICE_REF:link:".concat(ei),created_by:(null==e?void 0:e.email)||(null==e?void 0:e.id)||"accountant",role:"accountant"});if(t)throw t;en(""),await e_(),alert("Invoice link added successfully!")}catch(e){console.error("Error adding invoice link:",e),alert("Failed to add invoice link: ".concat(e.message))}finally{em(!1)}},e1=async()=>{if(el&&K)try{em(!0);let{data:{user:e}}=await ez.auth.getUser(),t=new FileReader;t.onload=async t=>{var r;let o=null==(r=t.target)?void 0:r.result,{data:i,error:n}=await ez.from("vehicle_inward_comments").insert({vehicle_inward_id:K.id,comment:"INVOICE_REF:".concat(el.type.startsWith("image/")?"image":"file",":").concat(el.name),created_by:(null==e?void 0:e.email)||(null==e?void 0:e.id)||"accountant",role:"accountant"}).select().single();if(n)throw n;let{error:l}=await ez.from("vehicle_inward_comment_attachments").insert({comment_id:i.id,file_name:el.name,file_url:o,file_type:el.type,file_size:el.size});if(l)throw l;await ez.from("vehicle_inward_comments").update({attachments_count:1}).eq("id",i.id),es(null),await e_(),alert("Invoice uploaded successfully!"),em(!1)},t.readAsDataURL(el)}catch(e){console.error("Error uploading invoice:",e),alert("Failed to upload invoice: ".concat(e.message)),em(!1)}},e5=async()=>{if(K&&confirm("Are you sure you want to mark this entry as Complete? This will finalize the accountant's work."))try{eg(!0);let{error:e}=await ez.from("vehicle_inward").update({status:"completed"}).eq("id",K.id);if(e)throw e;let t=_.filter(e=>e.id!==K.id);I(t),alert("Entry marked as Complete! The entry has been removed from the Accounts list."),Q(null),await eR()}catch(e){console.error("Error updating status:",e),alert("Failed to update status: ".concat(e.message))}finally{eg(!1)}};return W?(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#f8fafc"},children:(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("div",{style:{border:"4px solid #e5e7eb",borderTop:"4px solid #2563eb",borderRadius:"50%",width:"3rem",height:"3rem",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),(0,o.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "}),(0,o.jsx)("p",{style:{color:"#6b7280"},children:"Loading account entries..."})]})}):(0,o.jsxs)("div",{style:{backgroundColor:"#f8fafc",minHeight:"100vh",fontFamily:"system-ui, -apple-system, sans-serif"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"white",borderBottom:"1px solid #e2e8f0",padding:"1.5rem 2rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e293b",margin:0},children:"Accounts"}),(0,o.jsx)("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0.5rem 0 0 0"},children:"Manage invoicing for completed installations"})]}),(0,o.jsxs)("button",{onClick:()=>{eQ("completed"===y?eK(eN):["Entry ID,Customer Name,Phone,Email,Vehicle Number,Model,Make,Year,Color,Vehicle Type,Location,Manager,Installation Complete Date,Expected Delivery,Product Details,Total Amount",..._.map(e=>{var t;let r=e.products.map(e=>"".concat(e.product," (").concat(e.brand,") - ").concat(eG(e.price))).join("; ");return[e.shortId||e.id.substring(0,8),e.customerName,e.customerPhone,e.customerEmail||"",e.vehicleNumber,e.model,e.make,(null==(t=e.year)?void 0:t.toString())||"",e.color||"",e.vehicleType?U.get(e.vehicleType)||e.vehicleType:"",e.location?q.get(e.location)||e.location:"",e.manager?Y.get(e.manager)||e.manager:"",eZ(e.installationCompleteDate),e.expectedDelivery?new Date(e.expectedDelivery).toLocaleDateString("en-IN"):"",r,e.totalAmount.toString()]}).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),"completed"===y?"completed_entries.csv":"account_entries.csv")},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 4px rgba(5, 150, 105, 0.2)",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#047857",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#059669",children:[(0,o.jsx)(n.A,{style:{width:"1rem",height:"1rem"}}),"Export All to CSV"]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1.5rem"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"#eff6ff",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #bfdbfe"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",fontWeight:"500"},children:"Total Entries"}),(0,o.jsx)(l.A,{style:{width:"1.25rem",height:"1.25rem",color:"#3b82f6"}})]}),(0,o.jsx)("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b"},children:eH}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:"completed"===y?"Completed entries":"Ready for invoicing"})]}),(0,o.jsxs)("div",{style:{backgroundColor:"#dcfce7",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #bbf7d0"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",fontWeight:"500"},children:"Total Revenue"}),(0,o.jsx)(s.A,{style:{width:"1.25rem",height:"1.25rem",color:"#059669"}})]}),(0,o.jsx)("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b"},children:eG(eY)}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:"completed"===y?"Final revenue (after discounts)":"From all entries"})]}),(0,o.jsxs)("div",{style:{backgroundColor:"#fef3c7",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #fde68a"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",fontWeight:"500"},children:"Average Order"}),(0,o.jsx)(d.A,{style:{width:"1.25rem",height:"1.25rem",color:"#d97706"}})]}),(0,o.jsx)("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b"},children:eG(eJ)}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:"completed"===y?"Avg final order value":"Per installation"})]})]})]}),(0,o.jsx)("div",{style:{backgroundColor:"white",borderBottom:"1px solid #e2e8f0",padding:"0 2rem"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"2rem"},children:[(0,o.jsxs)("button",{onClick:()=>A("entries"),style:{padding:"1rem 0",border:"none",backgroundColor:"transparent",color:"entries"===y?"#2563eb":"#64748b",fontWeight:"entries"===y?"600":"400",borderBottom:"entries"===y?"3px solid #2563eb":"3px solid transparent",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[(0,o.jsx)(l.A,{style:{width:"1rem",height:"1rem"}}),"Account Entries"]}),(0,o.jsxs)("button",{onClick:()=>{A("completed"),eB()},style:{padding:"1rem 0",border:"none",backgroundColor:"transparent",color:"completed"===y?"#2563eb":"#64748b",fontWeight:"completed"===y?"600":"400",borderBottom:"completed"===y?"3px solid #2563eb":"3px solid transparent",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},children:[(0,o.jsx)(a.A,{style:{width:"1rem",height:"1rem"}}),"Completed"]})]})}),(0,o.jsxs)("div",{style:{padding:"2rem"},children:["entries"===y&&(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e2e8f0",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[(0,o.jsx)(c.A,{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",width:"1rem",height:"1rem",color:"#94a3b8"}}),(0,o.jsx)("input",{type:"text",placeholder:"Search by customer, vehicle number, or entry ID...",value:t,onChange:e=>r(e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem 0.625rem 2.5rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem",fontSize:"0.875rem",outline:"none",backgroundColor:"white",transition:"border-color 0.2s"},onFocus:e=>{e.target.style.borderColor="#2563eb",e.target.style.boxShadow="0 0 0 3px rgba(37, 99, 235, 0.1)"},onBlur:e=>{e.target.style.borderColor="#e2e8f0",e.target.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:[eW.length," ",1===eW.length?"entry":"entries"]})]}),(0,o.jsx)("div",{style:{maxHeight:"calc(100vh - 400px)",overflowY:"auto"},children:0===eW.length?(0,o.jsxs)("div",{style:{padding:"4rem 2rem",textAlign:"center"},children:[(0,o.jsx)(l.A,{style:{width:"3rem",height:"3rem",color:"#cbd5e1",margin:"0 auto 1rem"}}),(0,o.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.5rem"},children:t?"No entries found":"No entries available"}),(0,o.jsx)("p",{style:{fontSize:"0.875rem",color:"#64748b"},children:t?"Try adjusting your search terms":'Entries with "Installation Complete" status will appear here'})]}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1.5rem"},children:eW.map(e=>(0,o.jsxs)("div",{onClick:()=>Q(e),style:{backgroundColor:(null==K?void 0:K.id)===e.id?"#eff6ff":"#f9fafb",borderRadius:"0.75rem",border:(null==K?void 0:K.id)===e.id?"2px solid #2563eb":"1px solid #e2e8f0",padding:"1.5rem",cursor:"pointer",transition:"all 0.2s",boxShadow:(null==K?void 0:K.id)===e.id?"0 4px 6px -1px rgba(37, 99, 235, 0.1)":"0 1px 2px rgba(0,0,0,0.05)"},onMouseEnter:t=>{(null==K?void 0:K.id)!==e.id&&(t.currentTarget.style.backgroundColor="#f1f5f9",t.currentTarget.style.borderColor="#cbd5e1")},onMouseLeave:t=>{(null==K?void 0:K.id)!==e.id&&(t.currentTarget.style.backgroundColor="#f9fafb",t.currentTarget.style.borderColor="#e2e8f0")},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,o.jsx)("div",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#059669",color:"white",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600"},children:e.shortId||e.id.substring(0,8)}),(0,o.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#1e293b",margin:0},children:e.customerName}),(0,o.jsxs)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,o.jsx)(a.A,{style:{width:"0.75rem",height:"0.75rem"}}),"Installation Complete"]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.875rem",color:"#64748b"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(m.A,{style:{width:"1rem",height:"1rem"}}),(0,o.jsxs)("span",{children:[e.model," (",e.vehicleNumber,")"]})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(h.A,{style:{width:"1rem",height:"1rem"}}),(0,o.jsxs)("span",{children:["Completed: ",eZ(e.installationCompleteDate)]})]}),e.location&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(g.A,{style:{width:"1rem",height:"1rem"}}),(0,o.jsx)("span",{children:q.get(e.location)||e.location})]}),e.manager&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(u.A,{style:{width:"1rem",height:"1rem"}}),(0,o.jsx)("span",{children:Y.get(e.manager)||e.manager})]})]})]}),(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.25rem"},children:"Total Amount"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#059669"},children:eG(e.totalAmount)}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:[e.products.length," ",1===e.products.length?"product":"products"]})]})]}),e.products.length>0&&(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1rem",border:"1px solid #e2e8f0",marginTop:"1rem"},children:[(0,o.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(p.A,{style:{width:"1rem",height:"1rem"}}),"Product Details (",e.products.length,")"]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"0.75rem"},children:[e.products.slice(0,3).map((e,t)=>(0,o.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.25rem"},children:e.product}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:["Brand: ",e.brand," | ",Z.get(e.department)||e.department]}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"700",color:"#059669"},children:eG(e.price)})]},t)),e.products.length>3&&(0,o.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"#eff6ff",borderRadius:"0.5rem",border:"1px solid #bfdbfe",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",color:"#2563eb",fontWeight:"500"},children:["+",e.products.length-3," more"]})]})]})]},e.id))})})]}),"completed"===y&&(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"1.5rem"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.5rem",border:"1px solid #e2e8f0"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(f.A,{style:{width:"1.25rem",height:"1.25rem",color:"#2563eb"}}),(0,o.jsx)("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b",margin:0},children:"Time Period Filter"})]}),(0,o.jsxs)("button",{onClick:()=>{let e=eK(eN),t="all"===E?"all_time":"custom"===E?"custom_".concat(F||"range","_").concat(P||"range"):"last_".concat(E);eQ(e,"completed_entries_".concat(t,"_").concat(new Date().toISOString().split("T")[0],".csv"))},disabled:0===eN.length,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",backgroundColor:0===eN.length?"#f3f4f6":"#059669",color:0===eN.length?"#9ca3af":"white",border:"none",borderRadius:"0.5rem",fontSize:"0.75rem",fontWeight:"600",cursor:0===eN.length?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:e=>{eN.length>0&&(e.currentTarget.style.backgroundColor="#047857")},onMouseLeave:e=>{eN.length>0&&(e.currentTarget.style.backgroundColor="#059669")},title:0===eN.length?"No data to export":"Export ".concat(eN.length," entries"),children:[(0,o.jsx)(n.A,{style:{width:"0.875rem",height:"0.875rem"}}),"Export CSV"]})]}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:["all","today","week","month","year","custom"].map(e=>(0,o.jsx)("button",{onClick:()=>M(e),style:{padding:"0.75rem 1rem",backgroundColor:E===e?"#eff6ff":"#f9fafb",color:E===e?"#2563eb":"#374151",border:E===e?"2px solid #2563eb":"1px solid #e5e7eb",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:E===e?"600":"400",cursor:"pointer",textAlign:"left",textTransform:"capitalize",transition:"all 0.2s"},children:"all"===e?"All Time":"custom"===e?"Custom Range":"Last ".concat(e)},e))}),"custom"===E&&(0,o.jsxs)("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem",display:"block"},children:"Start Date"}),(0,o.jsx)("input",{type:"date",value:F,onChange:e=>L(e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem",display:"block"},children:"End Date"}),(0,o.jsx)("input",{type:"date",value:P,onChange:e=>O(e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"#eff6ff",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #bfdbfe"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",fontWeight:"500"},children:"Completed Entries"}),(0,o.jsx)(a.A,{style:{width:"1.25rem",height:"1.25rem",color:"#3b82f6"}})]}),(0,o.jsx)("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b"},children:eE}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:D?"Loading...":"In selected period"})]}),(0,o.jsxs)("div",{style:{backgroundColor:"#dcfce7",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #bbf7d0"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",fontWeight:"500"},children:"Final Revenue"}),(0,o.jsx)(s.A,{style:{width:"1.25rem",height:"1.25rem",color:"#059669"}})]}),(0,o.jsx)("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b"},children:eG(eM)}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:"After discounts"})]}),(0,o.jsxs)("div",{style:{backgroundColor:"#fef3c7",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #fde68a"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b",fontWeight:"500"},children:"Total Discounts"}),(0,o.jsx)(x,{style:{width:"1.25rem",height:"1.25rem",color:"#d97706"}})]}),(0,o.jsx)("div",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b"},children:eG(eL)}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:[eO.toFixed(1),"% of revenue"]})]})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Avg Order Value"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e293b"},children:eG(eq)})]}),(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Avg Discount"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ef4444"},children:eG(eP)})]}),(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Discount Ratio"}),(0,o.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e293b"},children:[eU.toFixed(1),"%"]}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:[eV," of ",eE," entries"]})]}),(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:"Original Revenue"}),(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e293b"},children:eG(eF)})]})]}),(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e2e8f0",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[(0,o.jsx)(c.A,{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",width:"1rem",height:"1rem",color:"#94a3b8"}}),(0,o.jsx)("input",{type:"text",placeholder:"Search completed entries...",value:t,onChange:e=>r(e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem 0.625rem 2.5rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem",fontSize:"0.875rem",outline:"none",backgroundColor:"white"}})]}),(0,o.jsxs)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:[eN.length," ",1===eN.length?"entry":"entries"]})]}),(0,o.jsx)("div",{style:{maxHeight:"calc(100vh - 500px)",overflowY:"auto",padding:"1.5rem"},children:D?(0,o.jsxs)("div",{style:{padding:"4rem 2rem",textAlign:"center"},children:[(0,o.jsx)("div",{style:{border:"4px solid #e5e7eb",borderTop:"4px solid #2563eb",borderRadius:"50%",width:"3rem",height:"3rem",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),(0,o.jsx)("p",{style:{color:"#6b7280"},children:"Loading completed entries..."})]}):0===eN.length?(0,o.jsxs)("div",{style:{padding:"4rem 2rem",textAlign:"center"},children:[(0,o.jsx)(a.A,{style:{width:"3rem",height:"3rem",color:"#cbd5e1",margin:"0 auto 1rem"}}),(0,o.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b",marginBottom:"0.5rem"},children:t?"No entries found":"No completed entries in selected period"}),(0,o.jsx)("p",{style:{fontSize:"0.875rem",color:"#64748b"},children:t?"Try adjusting your search terms":"Completed entries will appear here"})]}):(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:eN.map(e=>{var t;return(0,o.jsx)("div",{onClick:()=>Q(e),style:{backgroundColor:(null==K?void 0:K.id)===e.id?"#eff6ff":"#f9fafb",borderRadius:"0.75rem",border:(null==K?void 0:K.id)===e.id?"2px solid #2563eb":"1px solid #e2e8f0",padding:"1.5rem",cursor:"pointer",transition:"all 0.2s"},children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[(0,o.jsx)("div",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#10b981",color:"white",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"600"},children:e.shortId||e.id.substring(0,8)}),(0,o.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#1e293b",margin:0},children:e.customerName}),(0,o.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600"},children:"Completed"})]}),(0,o.jsxs)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.5rem"},children:[e.model," • ",e.vehicleNumber]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",fontSize:"0.875rem",color:"#64748b"},children:[e.location&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(g.A,{style:{width:"1rem",height:"1rem"}}),q.get(e.location)||e.location]}),e.completed_at&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(h.A,{style:{width:"1rem",height:"1rem"}}),"Completed: ",eZ(e.completed_at)]})]})]}),(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b",marginBottom:"0.25rem"},children:e.discountAmount&&e.discountAmount>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:{textDecoration:"line-through",color:"#9ca3af"},children:eG(e.totalAmount)}),(0,o.jsx)("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981",marginTop:"0.25rem"},children:eG(e.finalAmount||e.totalAmount)}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#ef4444",marginTop:"0.25rem"},children:["-",eG(e.discountAmount)," (",null==(t=e.discountPercentage)?void 0:t.toFixed(1),"%)"]}),e.discountOfferedBy&&(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem"},children:["By: ",e.discountOfferedBy]})]}):(0,o.jsx)("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669"},children:eG(e.totalAmount)})}),(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.25rem"},children:[e.products.length," ",1===e.products.length?"product":"products"]})]})]})},e.id)})})})]})]})]}),K&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},onClick:()=>Q(null),children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"1rem",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 50px rgba(0,0,0,0.25)"},onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,backgroundColor:"white",zIndex:10},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e293b",margin:0},children:"Account Entry Details"}),(0,o.jsx)("p",{style:{fontSize:"0.875rem",color:"#64748b",margin:"0.25rem 0 0 0"},children:K.shortId||K.id.substring(0,8)})]}),(0,o.jsx)("button",{onClick:()=>Q(null),style:{padding:"0.5rem",backgroundColor:"#f3f4f6",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",fontSize:"1.25rem",color:"#6b7280"},children:"\xd7"})]}),(0,o.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(u.A,{style:{width:"1.25rem",height:"1.25rem"}}),"Customer Information"]}),(0,o.jsx)("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.75rem",padding:"1.25rem"},children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Name"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.customerName})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Phone"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.customerPhone})]}),K.customerEmail&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Email"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.customerEmail})]})]})})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(m.A,{style:{width:"1.25rem",height:"1.25rem"}}),"Vehicle Information"]}),(0,o.jsx)("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.75rem",padding:"1.25rem"},children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Vehicle Number"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.vehicleNumber})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Model"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.model})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Make"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.make})]}),K.year&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Year"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.year})]}),K.color&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Color"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.color})]}),K.vehicleType&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Vehicle Type"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:U.get(K.vehicleType)||K.vehicleType})]})]})})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(h.A,{style:{width:"1.25rem",height:"1.25rem"}}),"Installation Details"]}),(0,o.jsx)("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.75rem",padding:"1.25rem"},children:(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Installation Complete Date"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:eZ(K.installationCompleteDate)})]}),K.expectedDelivery&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Expected Delivery"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:new Date(K.expectedDelivery).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),K.location&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Location"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:q.get(K.location)||K.location})]}),K.manager&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Assigned Manager"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:Y.get(K.manager)||K.manager})]})]})})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[(0,o.jsx)(p.A,{style:{width:"1.25rem",height:"1.25rem"}}),"Product Details & Pricing"]}),!X&&(0,o.jsxs)("button",{onClick:()=>{$(!0),et([...K.products])},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#1d4ed8",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#2563eb",children:[(0,o.jsx)(b.A,{style:{width:"1rem",height:"1rem"}}),"Edit Products"]})]}),(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"0.75rem",border:"1px solid #e5e7eb",overflow:"hidden"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{style:{backgroundColor:"#f9fafb"},children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",borderBottom:"1px solid #e5e7eb"},children:"Product"}),(0,o.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",borderBottom:"1px solid #e5e7eb"},children:"Brand"}),(0,o.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#374151",borderBottom:"1px solid #e5e7eb"},children:"Department"}),(0,o.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"600",color:"#374151",borderBottom:"1px solid #e5e7eb"},children:"Price"})]})}),(0,o.jsx)("tbody",{children:ee.length>0?ee.map((e,t)=>(0,o.jsxs)("tr",{style:{borderBottom:t<ee.length-1?"1px solid #f3f4f6":"none"},children:[(0,o.jsx)("td",{style:{padding:"0.75rem 1rem"},children:X?(0,o.jsx)("input",{type:"text",value:e.product,onChange:e=>eX(t,"product",e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}}):(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#1e293b",fontWeight:"500"},children:e.product})}),(0,o.jsx)("td",{style:{padding:"0.75rem 1rem"},children:X?(0,o.jsx)("input",{type:"text",value:e.brand,onChange:e=>eX(t,"brand",e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}}):(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b"},children:e.brand})}),(0,o.jsx)("td",{style:{padding:"0.75rem 1rem"},children:X?(0,o.jsx)("select",{value:e.department,onChange:e=>eX(t,"department",e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white"},children:Array.from(Z.entries()).map(e=>{let[t,r]=e;return(0,o.jsx)("option",{value:t,children:r},t)})}):(0,o.jsx)("span",{style:{fontSize:"0.875rem",color:"#64748b"},children:Z.get(e.department)||e.department})}),(0,o.jsx)("td",{style:{padding:"0.75rem 1rem",textAlign:"right"},children:X?(0,o.jsx)("input",{type:"number",value:e.price,onChange:e=>eX(t,"price",parseFloat(e.target.value)||0),min:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",textAlign:"right"}}):(0,o.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669"},children:eG(e.price)})})]},t)):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:4,style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:"No products listed"})})}),(0,o.jsx)("tfoot",{style:{backgroundColor:"#f9fafb",borderTop:"2px solid #e5e7eb"},children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{colSpan:3,style:{padding:"1rem",fontSize:"1rem",fontWeight:"700",color:"#1e293b",textAlign:"right"},children:"Total Amount:"}),(0,o.jsx)("td",{style:{padding:"1rem",fontSize:"1.125rem",fontWeight:"700",color:"#059669",textAlign:"right"},children:eG(ee.reduce((e,t)=>e+t.price,0))})]})})]})}),X&&(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem"},children:[(0,o.jsxs)("button",{onClick:()=>{$(!1),K&&et([...K.products])},style:{padding:"0.5rem 1rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},children:[(0,o.jsx)(v.A,{style:{width:"1rem",height:"1rem",display:"inline",marginRight:"0.25rem"}}),"Cancel"]}),(0,o.jsxs)("button",{onClick:e$,disabled:er,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:er?"#9ca3af":"#059669",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:er?"not-allowed":"pointer",transition:"all 0.2s"},children:[(0,o.jsx)(j.A,{style:{width:"1rem",height:"1rem"}}),er?"Saving...":"Save Changes"]})]})]}),"completed"===K.status&&(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[(0,o.jsx)(x,{style:{width:"1.25rem",height:"1.25rem"}}),"Discount Information"]}),!ef&&(0,o.jsxs)("button",{onClick:()=>ey(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:[(0,o.jsx)(b.A,{style:{width:"1rem",height:"1rem"}}),K.discountAmount&&K.discountAmount>0?"Edit Discount":"Add Discount"]})]}),(0,o.jsx)("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #e5e7eb"},children:ef?(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem",display:"block"},children:"Discount Amount (₹)"}),(0,o.jsx)("input",{type:"number",value:ex,onChange:e=>eb(e.target.value),min:"0",step:"0.01",placeholder:"Enter discount amount",style:{width:"100%",padding:"0.625rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem",display:"block"},children:"Offered By (Name/Department)"}),(0,o.jsx)("input",{type:"text",value:ev,onChange:e=>ej(e.target.value),placeholder:"e.g., Manager Name, Sales Team",style:{width:"100%",padding:"0.625rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem",display:"block"},children:"Discount Reason"}),(0,o.jsx)("textarea",{value:eS,onChange:e=>ew(e.target.value),placeholder:"Reason for discount (e.g., Bulk order, Loyalty customer)",rows:3,style:{width:"100%",padding:"0.625rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem",resize:"vertical"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,o.jsx)("button",{onClick:()=>{if(ey(!1),K){var e;eb((null==(e=K.discountAmount)?void 0:e.toString())||""),ej(K.discountOfferedBy||""),ew(K.discountReason||"")}},style:{padding:"0.5rem 1rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),(0,o.jsxs)("button",{onClick:async()=>{if(K)try{ek(!0);let e=parseFloat(ex)||0,t=K.totalAmount>0?e/K.totalAmount*100:0,{data:r}=await ez.from("vehicle_inward").select("notes").eq("id",K.id).single(),o={};if(null==r?void 0:r.notes)try{o=JSON.parse(r.notes)}catch(e){o={}}o.discount={discount_amount:e,discount_percentage:t,discount_offered_by:ev,discount_reason:eS};let{error:i}=await ez.from("vehicle_inward").update({notes:JSON.stringify(o)}).eq("id",K.id);if(i)throw i;let n={...K,discountAmount:e,discountPercentage:t,discountOfferedBy:ev,discountReason:eS,finalAmount:K.totalAmount-e};Q(n),"completed"===y&&R(B.map(e=>e.id===K.id?n:e)),ey(!1),alert("Discount information saved successfully!"),await eB()}catch(e){console.error("Error saving discount:",e),alert("Failed to save discount: ".concat(e.message))}finally{ek(!1)}},disabled:eC,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:eC?"#9ca3af":"#059669",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:eC?"not-allowed":"pointer"},children:[(0,o.jsx)(j.A,{style:{width:"1rem",height:"1rem"}}),eC?"Saving...":"Save Discount"]})]})]}):(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Discount Amount"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:K.discountAmount&&K.discountAmount>0?"#ef4444":"#9ca3af"},children:K.discountAmount&&K.discountAmount>0?eG(K.discountAmount):"No discount"})]}),K.discountAmount&&K.discountAmount>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Discount Percentage"}),(0,o.jsxs)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#ef4444"},children:[(null==(e=K.discountPercentage)?void 0:e.toFixed(2))||"0","%"]})]}),K.discountOfferedBy&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Offered By"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:K.discountOfferedBy})]}),K.discountReason&&(0,o.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Reason"}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#374151"},children:K.discountReason})]}),(0,o.jsx)("div",{style:{gridColumn:"1 / -1",padding:"1rem",backgroundColor:"white",borderRadius:"0.5rem",marginTop:"0.5rem",border:"1px solid #e5e7eb"},children:(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"Final Amount (After Discount):"}),(0,o.jsx)("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981"},children:eG(K.finalAmount||K.totalAmount)})]})})]})]})})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)(l.A,{style:{width:"1.25rem",height:"1.25rem"}}),"Invoice References (Optional)"]}),(0,o.jsxs)("div",{style:{backgroundColor:"#f9fafb",borderRadius:"0.75rem",padding:"1.25rem",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{marginBottom:"1rem"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,o.jsx)("input",{type:"text",placeholder:"Paste invoice link (URL)",value:ei,onChange:e=>en(e.target.value),style:{flex:1,padding:"0.625rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}}),(0,o.jsxs)("button",{onClick:e0,disabled:!ei.trim()||ec,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",backgroundColor:ec||!ei.trim()?"#9ca3af":"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:ec||!ei.trim()?"not-allowed":"pointer"},children:[(0,o.jsx)(S,{style:{width:"1rem",height:"1rem"}}),"Add Link"]})]})}),(0,o.jsx)("div",{style:{marginBottom:"1rem"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,o.jsxs)("label",{style:{flex:1,padding:"0.625rem",border:"1px solid #d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem",backgroundColor:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:el?"#111827":"#9ca3af"},children:[(0,o.jsx)(w.A,{style:{width:"1rem",height:"1rem"}}),(0,o.jsx)("input",{type:"file",accept:"image/*,.pdf",onChange:e=>{var t;return es((null==(t=e.target.files)?void 0:t[0])||null)},style:{display:"none"}}),el?el.name:"Upload Invoice (PDF/Image)"]}),(0,o.jsxs)("button",{onClick:e1,disabled:!el||ec,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1rem",backgroundColor:ec||!el?"#9ca3af":"#059669",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:ec||!el?"not-allowed":"pointer"},children:[(0,o.jsx)(w.A,{style:{width:"1rem",height:"1rem"}}),"Upload"]})]})}),ed.length>0&&(0,o.jsxs)("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[(0,o.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#374151",marginBottom:"0.75rem"},children:"Added References:"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:ed.map((e,t)=>(0,o.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",gap:"0.5rem"},children:["link"===e.type?(0,o.jsx)(S,{style:{width:"1rem",height:"1rem",color:"#2563eb"}}):(0,o.jsx)(C,{style:{width:"1rem",height:"1rem",color:"#059669"}}),(0,o.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{flex:1,fontSize:"0.875rem",color:"#2563eb",textDecoration:"none"},children:e.fileName||e.url.substring(0,50)})]},t))})]})]})]}),(0,o.jsx)("div",{style:{marginBottom:"2rem"},children:(0,o.jsx)(z.A,{vehicleId:K.id,userRole:eu})}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"space-between",alignItems:"center",paddingTop:"1rem",borderTop:"2px solid #e5e7eb"},children:["installation_complete"===K.status&&(0,o.jsxs)("button",{onClick:e5,disabled:eh,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:eh?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"700",cursor:eh?"not-allowed":"pointer",transition:"all 0.2s",boxShadow:eh?"none":"0 2px 4px rgba(16, 185, 129, 0.2)"},onMouseEnter:e=>{eh||(e.currentTarget.style.backgroundColor="#059669")},onMouseLeave:e=>{eh||(e.currentTarget.style.backgroundColor="#10b981")},children:[(0,o.jsx)(a.A,{style:{width:"1.125rem",height:"1.125rem"}}),eh?"Marking Complete...":"Mark as Complete"]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",marginLeft:"auto"},children:[(0,o.jsxs)("button",{onClick:()=>{eQ(["Product,Brand,Department,Price",...K.products.map(e=>[e.product,e.brand,Z.get(e.department)||e.department,e.price.toString()]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),"entry_".concat(K.shortId||K.id.substring(0,8),".csv"))},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#047857",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#059669",children:[(0,o.jsx)(n.A,{style:{width:"1rem",height:"1rem"}}),"Export CSV"]}),(0,o.jsx)("button",{onClick:()=>Q(null),style:{padding:"0.625rem 1.25rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#e5e7eb",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#f3f4f6",children:"Close"})]})]})]})]})})]})}},63581:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},86651:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{e.O(0,[331,762,441,255,358],()=>e(e.s=1308)),_N_E=e.O()}]);