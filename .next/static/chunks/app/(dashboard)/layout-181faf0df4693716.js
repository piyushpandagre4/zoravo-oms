(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{47045:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>u});var l=s(95155),t=s(12115),r=s(13177),n=s(24285),i=s(8525),o=s(70408);function u(e){let{children:a}=e,[s,u]=(0,t.useState)("admin"),[d,c]=(0,t.useState)("Demo Admin"),[f,m]=(0,t.useState)("raghav@sunkool.in"),[h,v]=(0,t.useState)(!0),p=(0,i.U)();(0,t.useEffect)(()=>{g();let e=p.channel("profile-updates-layout").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},()=>{g()}).on("postgres_changes",{event:"*",schema:"public",table:"system_settings"},()=>{g()}).subscribe();return()=>{p.removeChannel(e)}},[]);let g=async()=>{try{v(!0);let{data:{user:s}}=await p.auth.getUser();if(s){var e,a;let l=await (0,o.MD)();l?(u(l.role),c(l.name||(null==(e=s.user_metadata)?void 0:e.name)||s.email||"User")):c((null==(a=s.user_metadata)?void 0:a.name)||s.email||"User"),m(s.email||"")}}catch(e){console.error("Error loading user data:",e)}finally{v(!1)}};return(0,l.jsxs)("div",{style:{display:"flex",height:"100vh",backgroundColor:"#f8fafc"},children:[(0,l.jsx)(r.default,{userRole:s}),(0,l.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[!h&&(0,l.jsx)(n.default,{userRole:s,userName:d,userEmail:f}),(0,l.jsx)("main",{style:{flex:1,overflow:"auto",padding:"1.5rem"},children:a})]})]})}},91035:(e,a,s)=>{Promise.resolve().then(s.bind(s,47045))}},e=>{e.O(0,[331,619,37,441,255,358],()=>e(e.s=91035)),_N_E=e.O()}]);