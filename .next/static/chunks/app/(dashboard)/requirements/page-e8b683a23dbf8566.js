(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8525:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var o=r(88727);function i(){return(0,o.createBrowserClient)("https://fszlchqifmvssxxgygij.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzemxjaHFpZm12c3N4eGd5Z2lqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA3Njk4NzAsImV4cCI6MjA3NjM0NTg3MH0.-cwWKc1l3Af4zjOYIfRIH_bOMuTU82XD8dNK73_qPTE")}},16485:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},18085:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},20063:(e,t,r)=>{"use strict";var o=r(47260);r.o(o,"useParams")&&r.d(t,{useParams:function(){return o.useParams}}),r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},20508:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21786:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},24326:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},24947:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},27816:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},29575:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var o=r(95155),i=r(12115),n=r(90368),l=r(6191),s=r(16485),d=r(24947),a=r(89715);let c=(0,r(45105).A)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var m=r(20508),h=r(27816),u=r(86651),p=r(21786),g=r(24326),x=r(71360),f=r(65229),y=r(18085),b=r(8525),j=r(20063);function v(){let[e,t]=(0,i.useState)([]),[r,v]=(0,i.useState)(""),[C,w]=(0,i.useState)("All"),[k,S]=(0,i.useState)(!1),[A,_]=(0,i.useState)(!1),[z,I]=(0,i.useState)(null),[q,R]=(0,i.useState)([]),[W,B]=(0,i.useState)(""),[P,T]=(0,i.useState)({}),[D,E]=(0,i.useState)([]),[M,N]=(0,i.useState)([]),[O,F]=(0,i.useState)(!1),L=(0,j.useRouter)(),H=(0,b.U)(),[U,Z]=(0,i.useState)({customer_name:"",customer_number:"",description:"",priority:"medium",status:"pending"});(0,i.useEffect)(()=>{J()},[]);let J=async()=>{try{let{data:e,error:r}=await H.from("customer_requirements").select("*").order("created_at",{ascending:!1});if(r)throw r;t(e||[])}catch(e){console.error("Error fetching requirements:",e),t([])}},V=async e=>{try{let{data:t,error:r}=await H.from("customer_requirements_comments").select("*").eq("requirement_id",e).order("created_at",{ascending:!1});if(r)throw r;if(R(t||[]),t&&t.length>0){let e=t.map(e=>e.id),{data:r}=await H.from("customer_requirements_comment_attachments").select("*").in("comment_id",e).order("created_at",{ascending:!1}),o={};null==r||r.forEach(e=>{o[e.comment_id]||(o[e.comment_id]=[]),o[e.comment_id].push(e)}),T(o)}}catch(e){console.error("Error fetching comments:",e),R([])}},Y=(e,t)=>{Z(r=>({...r,[e]:t}))},X=async()=>{try{let e;if(null==z?void 0:z.editing){let{error:t,data:r}=await H.from("customer_requirements").update({...U,updated_at:new Date().toISOString()}).eq("id",z.id).select("id").single();if(t)throw t;e=r.id}else{let{error:t,data:r}=await H.from("customer_requirements").insert({...U}).select("id").single();if(t)throw t;e=r.id}if(D.length>0){for(let t of D){let r="".concat(Date.now(),"_").concat(t.name.replace(/[^a-zA-Z0-9.-]/g,"_")),o="".concat(e,"/").concat(r),{error:i}=await H.storage.from("service-attachments").upload(o,t);if(i)throw i;let{data:n}=await H.storage.from("service-attachments").getPublicUrl(o);await H.from("customer_requirements_attachments").insert({requirement_id:e,file_name:t.name,file_url:n.publicUrl,file_type:t.type,file_size:t.size})}let{data:t}=await H.from("customer_requirements_attachments").select("id").eq("requirement_id",e);await H.from("customer_requirements").update({attachments_count:(null==t?void 0:t.length)||0}).eq("id",e)}S(!1),I(null),et(),J()}catch(e){console.error("Error saving requirement:",e),alert("Failed to save: ".concat(e.message))}},K=async e=>{if(confirm("Delete this requirement?"))try{let{error:t}=await H.from("customer_requirements").delete().eq("id",e);if(t)throw t;J()}catch(e){alert("Failed to delete: ".concat(e.message))}},G=async(e,t)=>{try{let{error:r}=await H.from("customer_requirements").update({status:t}).eq("id",e);if(r)throw r;J()}catch(e){alert("Failed to update: ".concat(e.message))}},Q=async e=>{I(e),R([]),T({}),B(""),N([]),_(!0),await V(e.id)},$=async()=>{if(W.trim()||0!==M.length)try{let{data:e,error:t}=await H.from("customer_requirements_comments").insert({requirement_id:z.id,comment:W.trim()||"(No comment text)",created_by:"Demo Admin",attachments_count:M.length}).select("id").single();if(t)throw t;if(M.length>0)for(let t of M){let r="".concat(Date.now(),"_").concat(t.name.replace(/[^a-zA-Z0-9.-]/g,"_")),o="".concat(z.id,"/comments/").concat(e.id,"/").concat(r),{error:i}=await H.storage.from("service-attachments").upload(o,t);if(i)throw i;let{data:n}=await H.storage.from("service-attachments").getPublicUrl(o);await H.from("customer_requirements_comment_attachments").insert({comment_id:e.id,file_name:t.name,file_url:n.publicUrl,file_type:t.type,file_size:t.size})}await H.from("customer_requirements").update({comments_count:q.length+1}).eq("id",z.id),B(""),N([]),V(z.id),J()}catch(e){console.error("Error adding comment:",e),alert("Failed to add comment: ".concat(e.message))}},ee=async e=>{if(confirm("Delete this comment?"))try{await H.from("customer_requirements_comments").delete().eq("id",e),await H.from("customer_requirements").update({comments_count:Math.max(0,q.length-1)}).eq("id",z.id),V(z.id),J()}catch(e){alert("Failed to delete: ".concat(e.message))}},et=()=>{Z({customer_name:"",customer_number:"",description:"",priority:"medium",status:"pending"}),I(null),E([])},er=e.filter(e=>"pending"===e.status).length,eo=e.filter(e=>"in_progress"===e.status).length,ei=e.filter(e=>"ordered"===e.status).length,en=e.filter(e=>"procedure"===e.status).length,el=e.filter(e=>"contacted"===e.status).length,es=e.filter(e=>"completed"===e.status).length,ed=e.filter(e=>{var t,o;let i=(null==(t=e.description)?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null==(o=e.customer_name)?void 0:o.toLowerCase().includes(r.toLowerCase()));if("completed"===e.status&&"completed"!==C)return!1;let n="All"===C||e.status===C;return i&&n}),ea={low:"#10b981",medium:"#f59e0b",high:"#ef4444"},ec={pending:"#f59e0b",in_progress:"#3b82f6",ordered:"#8b5cf6",procedure:"#06b6d4",contacted:"#14b8a6",completed:"#10b981"};return(0,o.jsxs)("div",{style:{padding:"2rem"},children:[(0,o.jsxs)("button",{onClick:()=>L.push("/trackers"),style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",padding:"0.5rem 1rem",backgroundColor:"transparent",border:"1px solid #e2e8f0",borderRadius:"0.375rem",color:"#64748b",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:[(0,o.jsx)(n.A,{style:{width:"1rem",height:"1rem"}}),"Back to Trackers"]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{style:{fontSize:"1.875rem",fontWeight:"700",color:"#1e293b",margin:"0 0 0.5rem 0"},children:"Customer Requirement"}),(0,o.jsx)("p",{style:{fontSize:"1rem",color:"#64748b",margin:0},children:"Track customer service requirements and requests"})]}),(0,o.jsxs)("button",{onClick:()=>{et(),S(!0)},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:[(0,o.jsx)(l.A,{style:{width:"1rem",height:"1rem"}}),"Add Requirement"]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[(0,o.jsx)("button",{onClick:()=>w("pending"),style:{backgroundColor:"pending"===C?"#fef3c7":"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"pending"===C?"2px solid #f59e0b":"none",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)(s.A,{style:{width:"2rem",height:"2rem",color:"#f59e0b"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:er}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Pending"})]})]})}),(0,o.jsx)("button",{onClick:()=>w("in_progress"),style:{backgroundColor:"in_progress"===C?"#dbeafe":"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"in_progress"===C?"2px solid #3b82f6":"none",cursor:"pointer",textAlign:"left"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)(d.A,{style:{width:"2rem",height:"2rem",color:"#3b82f6"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:eo}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"In Progress"})]})]})}),(0,o.jsx)("button",{onClick:()=>w("ordered"),style:{backgroundColor:"ordered"===C?"#f3e8ff":"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"ordered"===C?"2px solid #8b5cf6":"none",cursor:"pointer",textAlign:"left"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)(a.A,{style:{width:"2rem",height:"2rem",color:"#8b5cf6"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:ei}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Ordered"})]})]})}),(0,o.jsx)("button",{onClick:()=>w("procedure"),style:{backgroundColor:"procedure"===C?"#cffafe":"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"procedure"===C?"2px solid #06b6d4":"none",cursor:"pointer",textAlign:"left"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)(c,{style:{width:"2rem",height:"2rem",color:"#06b6d4"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:en}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Procedure"})]})]})}),(0,o.jsx)("button",{onClick:()=>w("contacted"),style:{backgroundColor:"contacted"===C?"#ccfbf1":"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"contacted"===C?"2px solid #14b8a6":"none",cursor:"pointer",textAlign:"left"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)(m.A,{style:{width:"2rem",height:"2rem",color:"#14b8a6"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:el}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Contacted"})]})]})}),(0,o.jsx)("button",{onClick:()=>w("completed"),style:{backgroundColor:"completed"===C?"#dcfce7":"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"completed"===C?"2px solid #10b981":"none",cursor:"pointer",textAlign:"left"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)(h.A,{style:{width:"2rem",height:"2rem",color:"#10b981"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:es}),(0,o.jsx)("div",{style:{fontSize:"0.875rem",color:"#64748b"},children:"Completed"})]})]})})]}),(0,o.jsx)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,o.jsx)(u.A,{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",width:"1.25rem",height:"1.25rem",color:"#94a3b8"}}),(0,o.jsx)("input",{type:"text",placeholder:"Search requirements...",value:r,onChange:e=>v(e.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem",fontSize:"1rem",outline:"none"}})]}),(0,o.jsxs)("select",{value:C,onChange:e=>w(e.target.value),style:{padding:"0.75rem 1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem",fontSize:"1rem",cursor:"pointer"},children:[(0,o.jsx)("option",{value:"All",children:"All"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,o.jsx)("option",{value:"ordered",children:"Ordered"}),(0,o.jsx)("option",{value:"procedure",children:"Procedure"}),(0,o.jsx)("option",{value:"contacted",children:"Contacted"}),(0,o.jsx)("option",{value:"completed",children:"Completed"})]})]})}),(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflowX:"auto"},children:[(0,o.jsx)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #e2e8f0"},children:(0,o.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1e293b",margin:0},children:"Active Customer Requirements"})}),(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{style:{backgroundColor:"#f8fafc"},children:(0,o.jsxs)("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"CUSTOMER DETAILS"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"DESCRIPTION"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"PRIORITY"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"TIMESTAMP CREATED"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"ATTACHMENTS"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"COMMENTS"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"STATUS"}),(0,o.jsx)("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#475569"},children:"ACTIONS"})]})}),(0,o.jsx)("tbody",{children:0===ed.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:8,style:{padding:"3rem",textAlign:"center",color:"#94a3b8"},children:"No requirements found"})}):ed.map(e=>(0,o.jsxs)("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[(0,o.jsxs)("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#1e293b"},children:[(0,o.jsx)("div",{style:{fontWeight:"500"},children:e.customer_name}),(0,o.jsx)("a",{href:"tel:".concat(e.customer_number),style:{color:"#2563eb",textDecoration:"none",fontSize:"0.75rem"},children:e.customer_number})]}),(0,o.jsx)("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#64748b"},children:e.description}),(0,o.jsx)("td",{style:{padding:"1rem"},children:(0,o.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:ea[e.priority]+"20",color:ea[e.priority]},children:e.priority})}),(0,o.jsxs)("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#64748b"},children:[new Date(e.created_at).toLocaleDateString("en-GB"),(0,o.jsx)("div",{style:{fontSize:"0.75rem"},children:new Date(e.created_at).toLocaleTimeString()})]}),(0,o.jsx)("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#64748b",textAlign:"center"},children:(0,o.jsxs)("button",{onClick:()=>Q(e),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#2563eb"},children:[(0,o.jsx)(p.A,{style:{width:"1rem",height:"1rem"}}),e.attachments_count||0]})}),(0,o.jsx)("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#64748b",textAlign:"center"},children:(0,o.jsxs)("button",{onClick:()=>Q(e),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#2563eb"},children:[(0,o.jsx)(a.A,{style:{width:"1rem",height:"1rem"}}),e.comments_count||0]})}),(0,o.jsx)("td",{style:{padding:"1rem"},children:(0,o.jsxs)("select",{value:e.status,onChange:t=>G(e.id,t.target.value),style:{padding:"0.375rem 0.75rem",border:"1px solid ".concat(ec[e.status]),borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",cursor:"pointer",backgroundColor:"transparent",color:ec[e.status]},children:[(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,o.jsx)("option",{value:"ordered",children:"Ordered"}),(0,o.jsx)("option",{value:"procedure",children:"Procedure"}),(0,o.jsx)("option",{value:"contacted",children:"Contacted"}),(0,o.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,o.jsx)("td",{style:{padding:"1rem"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,o.jsx)("button",{onClick:()=>{Z({...e,status:e.status}),I({...e,editing:!0}),S(!0)},style:{padding:"0.375rem",backgroundColor:"transparent",border:"none",cursor:"pointer"},title:"Edit",children:(0,o.jsx)(g.A,{style:{width:"1rem",height:"1rem",color:"#2563eb"}})}),(0,o.jsx)("button",{onClick:()=>K(e.id),style:{padding:"0.375rem",backgroundColor:"transparent",border:"none",cursor:"pointer"},title:"Delete",children:(0,o.jsx)(x.A,{style:{width:"1rem",height:"1rem",color:"#dc2626"}})})]})})]},e.id))})]})]}),k&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},onClick:()=>{S(!1),et()},children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,o.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1e293b",margin:0},children:[(null==z?void 0:z.editing)?"Edit":"Add"," Requirement"]}),(0,o.jsx)("button",{onClick:()=>{S(!1),et()},style:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"0.5rem"},children:(0,o.jsx)(f.A,{style:{width:"1.5rem",height:"1.5rem",color:"#64748b"}})})]}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Customer Name *"}),(0,o.jsx)("input",{type:"text",value:U.customer_name,onChange:e=>Y("customer_name",e.target.value),placeholder:"Enter customer name",style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"1rem",outline:"none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Customer Number *"}),(0,o.jsx)("input",{type:"tel",value:U.customer_number,onChange:e=>Y("customer_number",e.target.value),placeholder:"Enter phone number",style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"1rem",outline:"none"}})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Description *"}),(0,o.jsx)("textarea",{value:U.description,onChange:e=>Y("description",e.target.value),placeholder:"Enter requirement description",rows:4,style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"1rem",outline:"none",resize:"vertical"}})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Priority"}),(0,o.jsxs)("select",{value:U.priority,onChange:e=>Y("priority",e.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"1rem",outline:"none",cursor:"pointer"},children:[(0,o.jsx)("option",{value:"low",children:"Low"}),(0,o.jsx)("option",{value:"medium",children:"Medium"}),(0,o.jsx)("option",{value:"high",children:"High"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Status"}),(0,o.jsxs)("select",{value:U.status,onChange:e=>Y("status",e.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"1rem",outline:"none",cursor:"pointer"},children:[(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,o.jsx)("option",{value:"ordered",children:"Ordered"}),(0,o.jsx)("option",{value:"procedure",children:"Procedure"}),(0,o.jsx)("option",{value:"contacted",children:"Contacted"}),(0,o.jsx)("option",{value:"completed",children:"Completed"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Attachments (Photo, PDF, Video) - Optional"}),(0,o.jsx)("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&E(Array.from(e.target.files))},style:{display:"none"},id:"requirement-file-input"}),(0,o.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("requirement-file-input"))?void 0:e.click()},style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",backgroundColor:"white",color:"#64748b",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[(0,o.jsx)(p.A,{style:{width:"1rem",height:"1rem"}}),"Choose files",(0,o.jsx)("span",{style:{marginLeft:"auto",color:"#94a3b8"},children:D.length>0?"".concat(D.length," file(s) selected"):"No file chosen"})]}),D.length>0&&(0,o.jsx)("div",{style:{marginTop:"0.5rem"},children:D.map((e,t)=>(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",padding:"0.5rem",backgroundColor:"#f8fafc",borderRadius:"0.375rem",marginBottom:"0.25rem"},children:[e.name," (",(e.size/1024).toFixed(2)," KB)"]},t))})]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"2rem"},children:[(0,o.jsx)("button",{onClick:()=>{S(!1),et()},style:{padding:"0.75rem 1.5rem",backgroundColor:"#f1f5f9",color:"#475569",border:"none",borderRadius:"0.375rem",fontSize:"1rem",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),(0,o.jsxs)("button",{onClick:X,disabled:!U.customer_name||!U.customer_number||!U.description,style:{padding:"0.75rem 1.5rem",backgroundColor:U.customer_name&&U.customer_number&&U.description?"#2563eb":"#94a3b8",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"1rem",fontWeight:"500",cursor:U.customer_name&&U.customer_number&&U.description?"pointer":"not-allowed"},children:[(null==z?void 0:z.editing)?"Update":"Add"," Requirement"]})]})]})}),A&&z&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},onClick:()=>_(!1),children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",padding:"2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,o.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"#1e293b",margin:0},children:"Comments & Attachments"}),(0,o.jsx)("button",{onClick:()=>_(!1),style:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"0.5rem"},children:(0,o.jsx)(f.A,{style:{width:"1.5rem",height:"1.5rem",color:"#64748b"}})})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem",padding:"1.5rem",backgroundColor:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[(0,o.jsx)(a.A,{style:{width:"1.5rem",height:"1.5rem",color:"#2563eb"}}),(0,o.jsx)("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e293b",margin:0},children:"Add Comments (with optional attachments)"})]}),q.length>0&&(0,o.jsx)("div",{style:{marginBottom:"1.5rem",maxHeight:"200px",overflowY:"auto",padding:"0.75rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:q.map((e,t)=>{let r=P[e.id]||[];return(0,o.jsxs)("div",{style:{backgroundColor:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,o.jsx)("strong",{style:{fontSize:"0.875rem",color:"#1e293b"},children:e.created_by}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,o.jsx)("span",{style:{fontSize:"0.75rem",color:"#64748b"},children:e.created_at?new Date(e.created_at).toLocaleString():"Just now"}),(0,o.jsx)("button",{onClick:()=>ee(e.id),style:{backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},title:"Delete comment",children:(0,o.jsx)(x.A,{style:{width:"0.875rem",height:"0.875rem",color:"#dc2626"}})})]})]}),(0,o.jsx)("p",{style:{margin:0,fontSize:"0.875rem",color:"#64748b",marginBottom:r.length>0?"0.75rem":0},children:e.comment}),r.length>0&&(0,o.jsxs)("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:"1px dashed #cbd5e1"},children:[(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem",fontWeight:"500"},children:["\uD83D\uDCCE Attachments (",r.length,")"]}),r.map((e,t)=>(0,o.jsxs)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",style:{display:"block",fontSize:"0.75rem",color:"#2563eb",textDecoration:"none",padding:"0.375rem 0.5rem",backgroundColor:"white",borderRadius:"0.25rem",border:"1px solid #e2e8f0",marginBottom:"0.25rem"},children:["\uD83D\uDCC4 ",e.file_name]},t))]})]},t)})})}),0===q.length&&(0,o.jsx)("div",{style:{textAlign:"center",color:"#94a3b8",padding:"2rem",backgroundColor:"white",borderRadius:"0.5rem",border:"1px dashed #cbd5e1",marginBottom:"1.5rem"},children:"No comments yet. Add one below."}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[(0,o.jsx)(l.A,{style:{width:"1rem",height:"1rem",color:"#2563eb"}}),(0,o.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#1e293b"},children:"Add New Comment"})]}),(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#64748b"},children:"Comment text (optional)"}),(0,o.jsx)("textarea",{value:W,onChange:e=>B(e.target.value),placeholder:"Enter your comment or leave empty to upload files only...",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",fontSize:"1rem",outline:"none",resize:"vertical",fontFamily:"inherit"}}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Attach Files to This Comment (Optional)"}),(0,o.jsx)("input",{type:"file",multiple:!0,onChange:e=>{e.target.files&&N(Array.from(e.target.files))},style:{display:"none"},id:"comment-file-input"}),(0,o.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("comment-file-input"))?void 0:e.click()},disabled:O,style:{width:"100%",padding:"0.75rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",backgroundColor:"white",color:"#64748b",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[(0,o.jsx)(p.A,{style:{width:"1rem",height:"1rem"}}),"Choose Files for Comment",(0,o.jsx)("span",{style:{marginLeft:"auto",color:"#94a3b8"},children:M.length>0?"".concat(M.length," file(s)"):"No files"})]}),M.length>0&&(0,o.jsx)("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f8fafc",borderRadius:"0.375rem"},children:M.map((e,t)=>(0,o.jsxs)("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.25rem"},children:["\uD83D\uDCCE ",e.name," (",(e.size/1024).toFixed(2)," KB)"]},t))})]}),(0,o.jsxs)("button",{onClick:$,disabled:!W.trim()&&0===M.length,style:{marginTop:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",backgroundColor:W.trim()||0!==M.length?"#2563eb":"#94a3b8",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:W.trim()||0!==M.length?"pointer":"not-allowed",width:"auto"},children:[(0,o.jsx)(y.A,{style:{width:"1rem",height:"1rem"}}),M.length>0?"Add Comment with ".concat(M.length," File(s)"):"Add Comment"]})]})]})]})})]})}},65229:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},76400:(e,t,r)=>{Promise.resolve().then(r.bind(r,29575))},86651:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},89715:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},90368:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(45105).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},e=>{e.O(0,[331,441,255,358],()=>e(e.s=76400)),_N_E=e.O()}]);